"0","# Calculate change in tau-PET SUVR and CDR-SoB over time, normalized to # of years elapsed"
"0","annual.changes <- full.df %>%"
"0","  ungroup() %>%"
"0","  select(-VISCODE2) %>%"
"0","  # Reshape wide --> long"
"0","  pivot_longer(cols=c(-RID, -EXAMDATE, -PTGENDER, -AGE), names_to=""Metric"","
"0","               values_to=""Value"") %>%"
"0","  # Calculate number of years between each visit as well as change in SUVR or CDR-SoB"
"0","  dplyr::group_by(RID, PTGENDER, Metric) %>%"
"0","  dplyr::summarise(n_years = as.numeric((EXAMDATE - lag(EXAMDATE, "
"0","                                                        default=EXAMDATE[1]))/365),"
"0","                   change = Value - lag(Value, default=Value[1]),"
"0","                   Age_Baseline = AGE[n_years==0]) %>%"
"0","  # Remove data points corresponding to first visit"
"0","  filter(n_years > 0) %>%"
"0","  # Calculate change in either tau-PET SUVR or CDR-SoB change per year"
"0","  dplyr::mutate(Annual_Change = change/n_years) %>%"
"0","  # Remove columns that are no longer needed"
"0","  select(-n_years, -change) %>%"
"0","  group_by(RID, Metric) %>%"
"0","  # Assign row identifier with row_number()"
"0","  dplyr::mutate(interval_num = row_number()) %>%"
"0","  # Reshape from long --> wide"
"0","  pivot_wider(., id_cols=c(RID, Age_Baseline, PTGENDER, interval_num), names_from=Metric,"
"0","              values_from=Annual_Change) %>%"
"0","  rename(""Sex"" = ""PTGENDER"")"
"2","`summarise()` regrouping output by 'RID', 'PTGENDER', 'Metric' (override with `.groups` argument)
"
"0","datatable(annual.changes[1:5])"
