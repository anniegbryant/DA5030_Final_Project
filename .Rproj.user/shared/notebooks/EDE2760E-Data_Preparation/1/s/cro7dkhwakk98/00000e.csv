"0","annual.changes <- full.df %>%"
"0","  ungroup() %>%"
"0","  select(-DX, -VISCODE2) %>%"
"0","  pivot_longer(cols=c(-RID, -EXAMDATE, -PTGENDER, -AGE), names_to=""Metric"","
"0","               values_to=""Value"") %>%"
"0","  dplyr::group_by(RID, PTGENDER, AGE, Metric) %>%"
"0","  dplyr::summarise(n_years = as.numeric((EXAMDATE - lag(EXAMDATE, "
"0","                                                        default=EXAMDATE[1]))/365),"
"0","                   change = Value - lag(Value, default=Value[1])) %>%"
"0","  filter(n_years > 0) %>%"
"0","  dplyr::mutate(Annual_Change = change/n_years) %>%"
"0","  select(-n_years, -change) %>%"
"0","  group_by(RID, Metric) %>%"
"0","  dplyr::mutate(interval_num = row_number()) %>%"
"0","  pivot_wider(., id_cols=c(RID, AGE, PTGENDER, interval_num), names_from=Metric,"
"0","              values_from=Annual_Change) %>%"
"0","  rename(""Age_Baseline"" = ""AGE"","
"0","         ""Sex"" = ""PTGENDER"")"
"0","datatable(annual.changes[1:5])"
